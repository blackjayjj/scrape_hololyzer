# .github/workflows/daily-rebuild.yml

name: Daily Cloudflare Rebuild

# 1. Triggers the workflow on a schedule
# This runs at 00:00 UTC every day. You can adjust the cron string if needed.
on:
  schedule:
    # Runs every day at midnight (00:00 UTC)
    - cron: '0 2 * * *'
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  daily_rebuild:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Cloudflare Pages Build
        # Uses the 'curl' command to send a POST request to the Deploy Hook URL.
        # This URL is retrieved securely from GitHub Secrets.
        run: |
          echo "Starting Cloudflare Pages rebuild..."
          curl -X POST ${{ secrets.CLOUDFLARE_DEPLOY_HOOK_URL }}
          echo "Rebuild request sent successfully."